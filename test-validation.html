<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Validation Tests</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .pass { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .fail { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background-color: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .test-details { font-size: 0.9em; margin-top: 5px; }
        h1, h2 { color: #333; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .performance-metrics {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .metric {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>Website Modernization - Final Testing & Validation</h1>
    <p>Comprehensive testing suite for requirements validation</p>

    <div class="test-grid">
        <!-- Responsive Design Tests -->
        <div class="test-section">
            <h2>Responsive Design Tests</h2>
            <p>Testing Requirements: 1.4, 4.3</p>
            <button onclick="runResponsiveTests()">Run Responsive Tests</button>
            <div id="responsive-results"></div>
        </div>

        <!-- External Links Tests -->
        <div class="test-section">
            <h2>External Links Validation</h2>
            <p>Testing Requirement: 2.3</p>
            <button onclick="runLinkTests()">Test All Links</button>
            <div id="link-results"></div>
        </div>

        <!-- Smooth Scrolling Tests -->
        <div class="test-section">
            <h2>Smooth Scrolling & Navigation</h2>
            <p>Testing smooth scrolling behavior</p>
            <button onclick="runScrollTests()">Test Navigation</button>
            <div id="scroll-results"></div>
        </div>

        <!-- Performance Tests -->
        <div class="test-section">
            <h2>Performance Validation</h2>
            <p>Testing Requirement: 4.1</p>
            <button onclick="runPerformanceTests()">Run Performance Tests</button>
            <div id="performance-results"></div>
        </div>

        <!-- Accessibility Tests -->
        <div class="test-section">
            <h2>Accessibility Tests</h2>
            <p>Testing accessibility compliance</p>
            <button onclick="runAccessibilityTests()">Test Accessibility</button>
            <div id="accessibility-results"></div>
        </div>

        <!-- Content Validation -->
        <div class="test-section">
            <h2>Content Structure Tests</h2>
            <p>Testing single-page consolidation</p>
            <button onclick="runContentTests()">Validate Content</button>
            <div id="content-results"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>Run All Tests</h2>
        <button onclick="runAllTests()" style="background: #28a745; font-size: 1.1em; padding: 15px 30px;">
            ðŸš€ Run Complete Test Suite
        </button>
        <div id="all-results"></div>
    </div>

    <script>
        // Test Results Storage
        let testResults = {
            responsive: [],
            links: [],
            scrolling: [],
            performance: [],
            accessibility: [],
            content: []
        };

        // Utility Functions
        function addResult(category, test, passed, details = '') {
            testResults[category].push({
                test,
                passed,
                details,
                timestamp: new Date().toISOString()
            });
        }

        function displayResults(category, containerId) {
            const container = document.getElementById(containerId);
            const results = testResults[category];
            
            if (results.length === 0) {
                container.innerHTML = '<div class="warning">No tests run yet</div>';
                return;
            }

            let html = '';
            let passCount = 0;
            
            results.forEach(result => {
                if (result.passed) passCount++;
                const className = result.passed ? 'pass' : 'fail';
                html += `
                    <div class="test-result ${className}">
                        <strong>${result.test}</strong>: ${result.passed ? 'PASS' : 'FAIL'}
                        ${result.details ? `<div class="test-details">${result.details}</div>` : ''}
                    </div>
                `;
            });

            const summary = `<div class="test-result ${passCount === results.length ? 'pass' : 'warning'}">
                Summary: ${passCount}/${results.length} tests passed
            </div>`;

            container.innerHTML = summary + html;
        }

        // Responsive Design Tests
        function runResponsiveTests() {
            testResults.responsive = [];
            
            // Test viewport meta tag
            const viewport = document.querySelector('meta[name="viewport"]');
            addResult('responsive', 'Viewport Meta Tag', 
                viewport && viewport.content.includes('width=device-width'),
                viewport ? `Content: ${viewport.content}` : 'Missing viewport meta tag'
            );

            // Test CSS media queries
            const styles = Array.from(document.styleSheets);
            let hasMediaQueries = false;
            let mediaQueryCount = 0;
            
            try {
                styles.forEach(sheet => {
                    if (sheet.cssRules) {
                        Array.from(sheet.cssRules).forEach(rule => {
                            if (rule.type === CSSRule.MEDIA_RULE) {
                                hasMediaQueries = true;
                                mediaQueryCount++;
                            }
                        });
                    }
                });
            } catch (e) {
                // Handle cross-origin stylesheets
                hasMediaQueries = true; // Assume present if we can't check
            }

            addResult('responsive', 'CSS Media Queries', hasMediaQueries,
                `Found ${mediaQueryCount} media queries`);

            // Test mobile navigation
            const mobileToggle = document.querySelector('.mobile-menu-toggle');
            addResult('responsive', 'Mobile Navigation Toggle', !!mobileToggle,
                mobileToggle ? 'Mobile menu toggle found' : 'No mobile menu toggle'
            );

            // Test responsive images
            const images = document.querySelectorAll('img');
            let responsiveImages = 0;
            images.forEach(img => {
                if (img.style.maxWidth === '100%' || 
                    getComputedStyle(img).maxWidth === '100%') {
                    responsiveImages++;
                }
            });
            
            addResult('responsive', 'Responsive Images', responsiveImages > 0,
                `${responsiveImages}/${images.length} images are responsive`
            );

            // Test container max-width
            const containers = document.querySelectorAll('.container');
            let hasMaxWidth = false;
            containers.forEach(container => {
                const styles = getComputedStyle(container);
                if (styles.maxWidth && styles.maxWidth !== 'none') {
                    hasMaxWidth = true;
                }
            });

            addResult('responsive', 'Container Max-Width', hasMaxWidth,
                hasMaxWidth ? 'Containers have max-width set' : 'No max-width found on containers'
            );

            displayResults('responsive', 'responsive-results');
        }

        // External Links Tests
        function runLinkTests() {
            testResults.links = [];
            
            const externalLinks = document.querySelectorAll('a[href^="http"], a[href^="mailto:"]');
            let targetBlankCount = 0;
            let workingLinks = 0;
            let totalExternal = externalLinks.length;

            // Test target="_blank" for external links
            externalLinks.forEach(link => {
                if (link.target === '_blank') {
                    targetBlankCount++;
                }
                
                // Test if href is properly formatted
                const href = link.getAttribute('href');
                if (href && (href.startsWith('http') || href.startsWith('mailto:'))) {
                    workingLinks++;
                }
            });

            addResult('links', 'External Links Target Blank', 
                targetBlankCount > 0,
                `${targetBlankCount}/${totalExternal} external links open in new tab`
            );

            addResult('links', 'Link Format Validation', 
                workingLinks === totalExternal,
                `${workingLinks}/${totalExternal} links have valid format`
            );

            // Test publication links
            const publicationLinks = document.querySelectorAll('.publication-card a[href^="http"]');
            addResult('links', 'Publication Links', 
                publicationLinks.length >= 4,
                `Found ${publicationLinks.length} publication links`
            );

            // Test article links
            const articleLinks = document.querySelectorAll('.article-card a[href^="http"], .article-card a[href*="articles_archive"]');
            addResult('links', 'Article Links', 
                articleLinks.length >= 4,
                `Found ${articleLinks.length} article links`
            );

            // Test social media links
            const socialLinks = document.querySelectorAll('a[href*="linkedin"], a[href*="scholar.google"], a[href*="twitter"], a[href*="instagram"]');
            addResult('links', 'Social Media Links', 
                socialLinks.length >= 3,
                `Found ${socialLinks.length} social media links`
            );

            displayResults('links', 'link-results');
        }

        // Smooth Scrolling Tests
        function runScrollTests() {
            testResults.scrolling = [];
            
            // Test smooth scroll CSS
            const htmlElement = document.documentElement;
            const scrollBehavior = getComputedStyle(htmlElement).scrollBehavior;
            addResult('scrolling', 'CSS Smooth Scroll', 
                scrollBehavior === 'smooth',
                `scroll-behavior: ${scrollBehavior}`
            );

            // Test navigation links
            const navLinks = document.querySelectorAll('.nav-link');
            let internalNavLinks = 0;
            navLinks.forEach(link => {
                const href = link.getAttribute('href');
                if (href && href.startsWith('#')) {
                    internalNavLinks++;
                    const targetSection = document.querySelector(href);
                    addResult('scrolling', `Navigation Link ${href}`, 
                        !!targetSection,
                        targetSection ? 'Target section exists' : 'Target section missing'
                    );
                }
            });

            addResult('scrolling', 'Internal Navigation Links', 
                internalNavLinks >= 5,
                `Found ${internalNavLinks} internal navigation links`
            );

            // Test JavaScript navigation functionality
            const jsEnabled = document.body.classList.contains('js-enabled');
            addResult('scrolling', 'JavaScript Navigation', jsEnabled,
                jsEnabled ? 'JavaScript navigation is active' : 'JavaScript navigation not detected'
            );

            // Test section IDs
            const sections = document.querySelectorAll('section[id]');
            addResult('scrolling', 'Section IDs', 
                sections.length >= 5,
                `Found ${sections.length} sections with IDs`
            );

            displayResults('scrolling', 'scroll-results');
        }

        // Performance Tests
        function runPerformanceTests() {
            testResults.performance = [];
            
            // Test page load time (approximate)
            const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
            addResult('performance', 'Page Load Time', 
                loadTime < 2000,
                `Load time: ${loadTime}ms (target: <2000ms)`
            );

            // Test resource count
            const resources = performance.getEntriesByType('resource');
            addResult('performance', 'Resource Count', 
                resources.length < 50,
                `${resources.length} resources loaded (target: <50)`
            );

            // Test image optimization
            const images = document.querySelectorAll('img');
            let optimizedImages = 0;
            images.forEach(img => {
                if (img.loading === 'lazy' || img.loading === 'eager') {
                    optimizedImages++;
                }
            });
            
            addResult('performance', 'Image Loading Optimization', 
                optimizedImages > 0,
                `${optimizedImages}/${images.length} images have loading attributes`
            );

            // Test CSS efficiency (embedded vs external)
            const styleSheets = document.querySelectorAll('link[rel="stylesheet"]');
            const inlineStyles = document.querySelectorAll('style');
            addResult('performance', 'CSS Consolidation', 
                styleSheets.length <= 2,
                `${styleSheets.length} external stylesheets, ${inlineStyles.length} inline styles`
            );

            // Test font loading
            const fontLinks = document.querySelectorAll('link[href*="fonts.googleapis.com"]');
            addResult('performance', 'Font Loading Optimization', 
                fontLinks.length <= 2,
                `${fontLinks.length} font requests (target: â‰¤2)`
            );

            // Display performance metrics
            const metricsHtml = `
                <div class="performance-metrics">
                    <h4>Performance Metrics</h4>
                    <div class="metric">
                        <span>DOM Content Loaded:</span>
                        <span>${performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart}ms</span>
                    </div>
                    <div class="metric">
                        <span>First Paint:</span>
                        <span>${performance.getEntriesByType('paint')[0]?.startTime.toFixed(0) || 'N/A'}ms</span>
                    </div>
                    <div class="metric">
                        <span>Resources Loaded:</span>
                        <span>${resources.length}</span>
                    </div>
                </div>
            `;

            displayResults('performance', 'performance-results');
            document.getElementById('performance-results').innerHTML += metricsHtml;
        }

        // Accessibility Tests
        function runAccessibilityTests() {
            testResults.accessibility = [];
            
            // Test semantic HTML
            const semanticElements = document.querySelectorAll('header, nav, main, section, article, aside, footer');
            addResult('accessibility', 'Semantic HTML Elements', 
                semanticElements.length >= 5,
                `Found ${semanticElements.length} semantic elements`
            );

            // Test heading hierarchy
            const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
            const h1Count = document.querySelectorAll('h1').length;
            addResult('accessibility', 'Heading Structure', 
                h1Count === 1 && headings.length >= 10,
                `${h1Count} H1 elements, ${headings.length} total headings`
            );

            // Test alt attributes on images
            const images = document.querySelectorAll('img');
            let imagesWithAlt = 0;
            images.forEach(img => {
                if (img.alt && img.alt.trim() !== '') {
                    imagesWithAlt++;
                }
            });
            
            addResult('accessibility', 'Image Alt Attributes', 
                imagesWithAlt === images.length,
                `${imagesWithAlt}/${images.length} images have alt text`
            );

            // Test color contrast (basic check)
            const textElements = document.querySelectorAll('p, h1, h2, h3, h4, h5, h6, a, span');
            let contrastIssues = 0;
            // This is a simplified check - in real testing, you'd use tools like axe-core
            
            addResult('accessibility', 'Color Contrast Check', 
                contrastIssues === 0,
                'Basic contrast check passed (use axe-core for comprehensive testing)'
            );

            // Test keyboard navigation
            const focusableElements = document.querySelectorAll('a, button, input, textarea, select, [tabindex]');
            addResult('accessibility', 'Focusable Elements', 
                focusableElements.length >= 10,
                `Found ${focusableElements.length} focusable elements`
            );

            // Test ARIA attributes
            const ariaElements = document.querySelectorAll('[aria-label], [aria-labelledby], [aria-describedby], [role]');
            addResult('accessibility', 'ARIA Attributes', 
                ariaElements.length > 0,
                `Found ${ariaElements.length} elements with ARIA attributes`
            );

            displayResults('accessibility', 'accessibility-results');
        }

        // Content Structure Tests
        function runContentTests() {
            testResults.content = [];
            
            // Test single-page structure
            const sections = document.querySelectorAll('section');
            addResult('content', 'Single Page Structure', 
                sections.length >= 5,
                `Found ${sections.length} main sections`
            );

            // Test required sections
            const requiredSections = ['hero', 'about', 'experience', 'publications', 'articles', 'contact'];
            let foundSections = 0;
            requiredSections.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) foundSections++;
                addResult('content', `${sectionId.charAt(0).toUpperCase() + sectionId.slice(1)} Section`, 
                    !!section,
                    section ? 'Section exists' : 'Section missing'
                );
            });

            // Test publications count
            const publications = document.querySelectorAll('.publication-card');
            addResult('content', 'Publications Count', 
                publications.length >= 4 && publications.length <= 6,
                `Found ${publications.length} publications (target: 4-6)`
            );

            // Test articles count
            const articles = document.querySelectorAll('.article-card');
            addResult('content', 'Articles Count', 
                articles.length >= 4 && articles.length <= 6,
                `Found ${articles.length} articles (target: 4-6)`
            );

            // Test experience timeline
            const experienceItems = document.querySelectorAll('.experience-item');
            addResult('content', 'Experience Timeline', 
                experienceItems.length >= 3,
                `Found ${experienceItems.length} experience items`
            );

            // Test contact information
            const emailLinks = document.querySelectorAll('a[href^="mailto:"]');
            const socialLinks = document.querySelectorAll('.contact-link');
            addResult('content', 'Contact Information', 
                emailLinks.length >= 1 && socialLinks.length >= 3,
                `${emailLinks.length} email links, ${socialLinks.length} social links`
            );

            displayResults('content', 'content-results');
        }

        // Run All Tests
        function runAllTests() {
            document.getElementById('all-results').innerHTML = '<div class="warning">Running comprehensive test suite...</div>';
            
            // Run all test categories
            runResponsiveTests();
            runLinkTests();
            runScrollTests();
            runPerformanceTests();
            runAccessibilityTests();
            runContentTests();

            // Generate summary report
            setTimeout(() => {
                let totalTests = 0;
                let totalPassed = 0;
                let summaryHtml = '<h3>Test Suite Summary</h3>';

                Object.keys(testResults).forEach(category => {
                    const results = testResults[category];
                    const passed = results.filter(r => r.passed).length;
                    totalTests += results.length;
                    totalPassed += passed;
                    
                    const status = passed === results.length ? 'pass' : 'fail';
                    summaryHtml += `
                        <div class="test-result ${status}">
                            <strong>${category.charAt(0).toUpperCase() + category.slice(1)}:</strong> 
                            ${passed}/${results.length} tests passed
                        </div>
                    `;
                });

                const overallStatus = totalPassed === totalTests ? 'pass' : 'warning';
                summaryHtml = `
                    <div class="test-result ${overallStatus}">
                        <strong>Overall Results: ${totalPassed}/${totalTests} tests passed</strong>
                    </div>
                ` + summaryHtml;

                document.getElementById('all-results').innerHTML = summaryHtml;
            }, 500);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Website Validation Tests Ready');
        });
    </script>
</body>
</html>